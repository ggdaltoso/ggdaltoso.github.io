{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/monolito-multirepo-ou-monorepo/","result":{"data":{"markdownRemark":{"id":"39d56f7d-d941-59bb-8e93-682d46aa6630","html":"<p>Muitos projetos adotam o modelo de monorepo para estruturar seu repositório.\nGrandes nomes como <a href=\"https://github.com/angular/angular\">Angular</a>,\n<a href=\"https://github.com/babel/babel\">Babel</a> e\n<a href=\"https://github.com/facebook/react\">React</a>, por exemplo, utilizam essa\nestratégia. Por outro lado, a Uber passou de <a href=\"https://www.youtube.com/watch?v=lV8-1S28ycM\">Monorepo para Multirepo</a> e o <a href=\"https://github.com/microsoft/vscode\">VSCode</a> continua sendo\num monolito. Qual será a melhor para o meu projeto?</p>\n<p>Antes de começar a discutir o quão bom ou ruim é uma estrutura de repositório,\nacho importante falar um pouco de cada uma delas.</p>\n<h3 id=\"monolito\" style=\"position:relative;\"><a href=\"#monolito\" aria-label=\"monolito permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monolito</h3>\n<figure class=\"float-left\" style=\"width: 120px\">\n  <img src=\"/media/monorepo/monolith.png\" alt=\"Monolito\">\n</figure>\n<p>Esse modelo consiste em ter tudo em um único lugar. Tudo junto e misturado.\nGeralmente é a mais comum entre os projetos antigos (famoso legado) pois era a\nforma mais fácil de se começar e continuar um projeto, já que não haviam\nferramentas suficientes para se fazer o manuseio de multiplos módulos em um\nmesmo repositório. Resumidamente: <strong>1 repositório e 1 projeto</strong>.</p>\n<h3 id=\"multirepo-ou-polirepo\" style=\"position:relative;\"><a href=\"#multirepo-ou-polirepo\" aria-label=\"multirepo ou polirepo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multirepo ou Polirepo</h3>\n<figure class=\"float-right\" style=\"width: 167px\">\n\t<img src=\"/media/monorepo/multirepo.png\" alt=\"Multirepo ou Polirepo\">\n</figure>\n<p>Em um cenário onde um projeto possa ser subdivido em múltiplos módulos (ou em\nvários projetos), podemos atribuir para cada um deles, seu próprio repositório,\nou seja, <strong>N repositórios para N projetos</strong>.</p>\n<h3 id=\"monorepo\" style=\"position:relative;\"><a href=\"#monorepo\" aria-label=\"monorepo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monorepo</h3>\n<figure class=\"float-left\" style=\"width: 120px\">\n\t<img src=\"/media/monorepo/monorepo.png\" alt=\"Monorepo\">\n</figure>\n<p>Por fim, quando temos vários projetos que compartilham do mesmo repositório,\ndamos o nome a essa estrutura de Monorepo que, em minha opinião, é uma extensão\ndo Monolito, lidando com <strong>1 repositório para N projetos</strong>.</p>\n<br >\n<p>Qual dessas estruturas eu devo colocar em meu projeto? Bom, depende…</p>\n<h2 id=\"minha-lista-de-receitas\" style=\"position:relative;\"><a href=\"#minha-lista-de-receitas\" aria-label=\"minha lista de receitas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Minha lista de receitas</h2>\n<figure class=\"float-left\" style=\"width: 280px\">\n\t<img src=\"/media/monorepo/simple-structure.png\" alt=\"Estrutura simples do projeto inicial\">\n</figure>\n<p>Um projeto é tudo aquilo que tem começo, meio e fim e aqui ele vai ser\nconsiderado como algo que possa ser versionado também, para fins ilustrativos.\nPara exemplificar mais um pouco, vamos criar um projeto fictício para poder\nacompanhar a gente durante o raciocínio.\nConsideraremos também que esse é um projeto pessoal que vai sendo desenvolvido\nconforme as que necessidades vão aparecendo. Nosso projeto se chamará <em>Minha\nlista de Receitas</em>.</p>\n<p>O mais importante aqui é começar. Apenas com a ideia na cabeça, o mais comum de\nse fazer é criar o repositório vazio seguido por um visual simples.</p>\n<br >\n<p>Dessa forma teremos um projeto para um repositório, caracterizando-o como\nMonolito. No meu ponto de vista, essa é a estrutura mais simples que esse\nrepositório pode ter e a mais fácil também.</p>\n<p>O desenvolvimento vai se saindo muito bem e você fica muito orgulhoso de como\nele está ficando bonito. Chega um ponto em que você percebe que seria bom\nse conseguisse usar seus estilos em um outro projeto, como um pacote separado.\nOu seja, você precisa quebrar seu projeto principal em 2 projetos: 1 para o\n<em>Minha lista de Receitas</em> e 1 para os estilos, que vou chamar de\n<em>Receitas.Styles</em>.</p>\n<p>A partir desse momento a estrutura de Monolito já não comporta nossas\nnecessidades mais (N projetos). Precisamos escolher entre Multirepo e Monorepo.</p>\n<h2 id=\"a-escolha\" style=\"position:relative;\"><a href=\"#a-escolha\" aria-label=\"a escolha permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A escolha</h2>\n<p>Para o <em>Minha lista de Receitas</em> ou para o que você esteja fazendo, a escolha do\nque implementar pode variar conforme vários fatores. Pela minha própria\nexperiência, vou listar alguns para ajudar a gente escolher qual estrutura seria\na melhor.</p>\n<h4 id=\"dependências\" style=\"position:relative;\"><a href=\"#depend%C3%AAncias\" aria-label=\"dependências permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dependências</h4>\n<ul>\n<li>Monorepo: Tudo que envolva seu projeto e subprojetos será instalado,\n<a href=\"https://classic.yarnpkg.com/en/docs/workspaces\">compartilhando aquilo que tiver em comum</a>.\nNo nosso exemplo, se você precisar fazer apenas uma alteração nos estilos,\nvocê precisará instalar as dependências tanto do <em>Minha lista de Receitas</em>\nquanto do <em>Receitas.Styles</em>.</li>\n<li>Multirepo: Cada repositório tem suas dependências e, mesmo que sejam as\nmesmas, ficarão duplicadas em sua máquina. Se seus projetos forem do NPM, por\nexemplo, você terá que usar <a href=\"https://docs.npmjs.com/cli/link\"><code class=\"language-text\">npm link</code></a> para\nfazer com que eles se comuniquem enquanto desenvolve. Se você pesquisar um\npouco sobre isso ou mesmo tentar usar, vai ver que não é tão mágico quanto\ndizem e nem sempre funcionam com outras bibliotecas por aí.</li>\n</ul>\n<h4 id=\"issues-e-pull-requests\" style=\"position:relative;\"><a href=\"#issues-e-pull-requests\" aria-label=\"issues e pull requests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><em>Issues</em> e <em>Pull Requests</em></h4>\n<ul>\n<li>Monorepo: Todas as <em>issues</em> e <em>pull requests</em> estarão em um único lugar\n(repositório) e você vai ter que pensar em\n<a href=\"https://github.com/actions/labeler\">uma forma</a> de agrupá-las ou\ndiferenciá-las se não quiser ficar tudo misturado e jogado.</li>\n<li>Multirepo: Sempre que quiser responder uma <em>issue</em> ou mergear um <em>pull\nrequest</em>, você vai ter que trocar de contexto, instalar tudo de novo, linkar\nos projetos pra testar e por aí vai.</li>\n</ul>\n<p>Eu colocaria <a href=\"https://en.wikipedia.org/wiki/CI/CD\"><em>CI/CD</em></a> como um outro fator\nimportante nessa escolha mas tem um ponto a ser considerado antes. Tanto em\nMultirepos quanto em Monorepos eu nunca tive problemas em manusear os processos\nde publicação e/ou <em>deploy</em>. O mais importante é saber as etapas de cada projeto\npara que seu repositório fique bem.</p>\n<p>Dado esses pontos, qual estrutura é a melhor para o projeto <em>Minha lista de\nReceitas</em>?</p>\n<p>Eu, particularmente, escolheria Monorepo por já ter trabalhado com algo similar\ne, inclusive, implementei a transição de um\n<a href=\"https://github.com/React95/React95/pull/117\">Monolito para um Monorepo</a>, no\nReact95.</p>\n<p>Qual você escolheria?</p>","fields":{"slug":"/posts/monolito-multirepo-ou-monorepo/","tagSlugs":["/tag/arquitetura/","/tag/monorepo/","/tag/monolito/","/tag/multirepo/"]},"frontmatter":{"date":"2020-07-10T00:00:00.0000","description":"Monolito é fácil para começar um projeto. Multirepo pode ser bom  quando o problema é espaço. Monorepo tem vários projetos que compartilham o  mesmo repositório. Qual deles é bom pra mim?","tags":["Arquitetura","Monorepo","Monolito","Multirepo"],"title":"Monolito, Multirepo ou Monorepo?"}}},"pageContext":{"slug":"/posts/monolito-multirepo-ou-monorepo/"}}}